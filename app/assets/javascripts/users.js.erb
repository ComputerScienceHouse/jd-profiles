jQuery.fn.redraw = function() {
    return this.hide(0, function() {
                    $(this).show();
                        });
};

$("#edit").click(function(e) {
    if ($(this).text() == "edit") {
        $(this).text("done");
        $('.attr').hide(); // hides all the current info
        $('.attr_input_div').each(function(index) {
            var id = $(this).attr('id');
            var val = $('#' + id.slice(0, -10)).text();
            $('#' + id).append('<input id="' + id + '_input" name="' + id + '_input" type="text" value="' + val  + '">');
            $('#' + id + '_form').bind('ajax:success', function(evt, data, xhr) {
                console.log($.parseJSON(status));
            });
        });
    } else {
        $(this).text("edit");
        $('.attr').show();
        $('.attr_input_div').empty();
        $('body').hide();
        setTimeout(function() {
            $('body').show();
        }, 0);
    }
});
